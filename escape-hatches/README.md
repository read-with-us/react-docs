# Escape Hatches

> **Note**
>
> 'Escape Hatches' ì±•í„°ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë‚´ìš©ì„ ë‹¤ë£¹ë‹ˆë‹¤.
>
> - ë¦¬ë Œë”ë§ ì—†ì´ ì •ë³´ë¥¼ "ê¸°ì–µ"í•˜ëŠ” ë°©ë²•
> - ë¦¬ì•¡íŠ¸ê°€ ê´€ë¦¬í•˜ëŠ” DOM ì—˜ë¦¬ë¨¼íŠ¸ì— ì ‘ê·¼í•˜ëŠ” ë°©ë²•
> - ì»´í¬ë„ŒíŠ¸ë¥¼ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•˜ëŠ” ë°©ë²•
> - ë¶ˆí•„ìš”í•œ Effectsë¥¼ ì œê±°í•˜ëŠ” ë°©ë²•
> - Effectì˜ ë¼ì´í”„ì‚¬ì´í´ì´ ì»´í¬ë„ŒíŠ¸ì˜ ë¼ì´í”„ì‚¬ì´í´ê³¼ ì–´ë–»ê²Œ ë‹¤ë¥¸ì§€
> - ì–´ë–¤ ê°’ì´ Effectsë¥¼ ë‹¤ì‹œ íŠ¸ë¦¬ê±°í•˜ì§€ ëª»í•˜ê²Œ ë§‰ëŠ” ë°©ë²•
> - Effectsì˜ ì¬ì‹¤í–‰ ë¹ˆë„ë¥¼ ì¤„ì´ëŠ” ë°©ë²•
> - ì»´í¬ë„ŒíŠ¸ ê°„ì— ë¡œì§ì„ ê³µìœ í•˜ëŠ” ë°©ë²•

## Escape Hatches

1.  > Effects are an escape hatch from the React paradigm. They let you â€œstep outsideâ€ of React and synchronize your components with some external system. If there is no external system involved (for example, if you want to update a componentâ€™s state when some props or state change), you shouldnâ€™t need an Effect. Removing unnecessary Effects will make your code easier to follow, faster to run, and less error-prone.

    - ë¦¬ì•¡íŠ¸ ì„±ëŠ¥ ìµœì í™”ì˜ í‚¤í¬ì¸íŠ¸ ì¤‘ í•˜ë‚˜ë¼ëŠ” ìƒê°ì´ ë“œë„¤ìš”.

2.  > ì™¸ë¶€ ì‹œìŠ¤í…œì´ ê´€ì—¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°(ì˜ˆ: ì¼ë¶€ propì´ë‚˜ stateê°€ ë³€ê²½ë  ë•Œ ì»´í¬ë„ŒíŠ¸ì˜ stateë¥¼ ì—…ë°ì´íŠ¸í•˜ë ¤ëŠ” ê²½ìš°)ì—ëŠ” Effectê°€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    - ì´ë ‡ê²Œ ì‚¬ìš©í•œ ê²½ìš° ì •ë§ ë§ì•˜ëŠ”ë° ìš”ì¦˜ì—” ì¡°ì‹¬í•˜ê³  ìˆì–´ìš”. You Migh Not Need an Effect ì±•í„° ê°€ì¥ ê¸°ëŒ€ë©ë‹ˆë‹¤.
3.  > - You donâ€™t need Effects to transform data for rendering.
    > - You donâ€™t need Effects to handle user events.

    - ê·¸ ë™ì•ˆ ì¢€ ë³µì¡í•´ì§„ë‹¤ ì‹¶ìœ¼ë©´ í•´ê²°ì±…ìœ¼ë¡œ useEffectë¥¼ ë‚¨ìš©í•œ ì ì´ ë§ì•˜ì—ˆëŠ”ë° ë°˜ì„±í•˜ê²Œ ë˜ë„¤ìš”..!

4.  > Effects have a different lifecycle from components. Components may mount, update, or unmount. An Effect can only do two things: to start synchronizing something, and later to stop synchronizing it.
    - í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì¼ ë•Œ ë¼ì´í”„ì‚¬ì´í´ ì™¸ìš°ë˜ ê²Œ ìƒê°ë‚˜ìš”. Effectì˜ ë™ì‘ë„ ë¼ì´í”„ì‚¬ì´í´ë¡œ ì„¤ëª…í•˜ëŠ” êµ°ìš”.
    - Slash ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ [useDidUpdate](https://slash.page/ko/libraries/react/react/src/hooks/usedidupdate.i18n/)
5.  > Move the code reading theme out of your Effect into an Effect Event
    - useEffectEventë¼ëŠ” í›…ì€ ì •ë§ ì²˜ìŒ ë“¤ì–´ë´¤ì–´ìš”. ê·¸ë˜ì„œ ì´ëŸ° ê²½ìš°ì— ê·¸ëƒ¥ ì˜ì¡´ì„± ë°°ì—´ì—ì„œ ë¹¼ë²„ë ¸ë˜ ê²ƒ ê°™ë„¤ìš”.
    - Q. ì‹¤í—˜ì ì¸ APIë¼ ë‹¹ì¥ ì“°ê¸° ì–´ë ¤ìš¸ ê²ƒ ê°™ì€ë° ë‹¤ë¥¸ ë¶„ë“¤ë„ ê·¸ëƒ¥ ì˜ì¡´ì„± ë°°ì—´ì—ì„œ ì œê±°í•˜ì…¨ë‚˜ìš”? ì•„ë‹ˆë©´ ë” ì¢‹ì€ ë°©ë²•ì´ ìˆì„ê¹Œìš”?
    - A. ì˜¤ ì´ëŸ° í›…ì´ ìˆì—ˆêµ°ìš”â€¦. ì €ëŠ” ì €ëŸ° ê²½ìš°ì—” roomIdì— ëŒ€í•œ ì»¤ë„¥ì…˜ì´ ì§„í–‰ì¤‘ì´ë©´ return ì‹œí‚¤ëŠ” ì‹ìœ¼ë¡œ ê¾¸ì—­ê¾¸ì—­ ì²˜ë¦¬í–ˆë˜ê²ƒ ê°™ì€ë° (+ì•„ë‹ˆë©´ useRefë¥¼ ì´ìƒí•˜ê²Œ ì—®ì–´ì„œ ì‚¬ìš©í•˜ëŠ” ì‹â€¦) ì €ë ‡ê²Œ ì²˜ë¦¬í•˜ë©´ í›¨ì”¬ ê°œì„ ë  ê²ƒ ê°™ì€ë° experimental_useEffectEvent ì´ë¼ í•˜ë‹ˆ ì¡°ê¸ˆ ë¬´ì„­ê¸´ í•˜ë„¤ìš” ííâ€¦
    - A. experimental ì€ í”„ë¡œë•ì…˜ì—ì„œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ê²ƒì´ ì¢‹ì§€ ì•Šì„ê¹Œìš”!
6.  > ì´ ëª©ë¡ì— ë¬´ì—‡ì„ ë„£ì„ì§€ëŠ” ì˜ë„ì ìœ¼ë¡œ ì„ íƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ ëª©ë¡ì€ ë‹¹ì‹ ì˜ ì½”ë“œë¥¼ ê¸°ìˆ í•©ë‹ˆë‹¤. ì˜ì¡´ì„± ëª©ë¡ì„ ë³€ê²½í•˜ë ¤ë©´, ì½”ë“œë¥¼ ë³€ê²½í•˜ì„¸ìš”.
    - ê·¸ë™ì•ˆ ì™„ì „íˆ ë°˜ëŒ€ë¡œ ìƒê°í•˜ê³  ìˆì—ˆë„¤ìš”. ì˜ì¡´ì„± ë°°ì—´ì— propsë‚˜ stateë¥¼ ë„£ì–´ì„œ Effect ë‚´ì˜ ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤ê³  ìƒê°í–ˆì–´ìš”.

## Referencing Values with Refs

1.  > ì»´í¬ë„ŒíŠ¸ê°€ íŠ¹ì • ì •ë³´ë¥¼ â€˜ê¸°ì–µâ€™í•˜ë„ë¡ í•˜ê³  ì‹¶ì§€ë§Œ í•´ë‹¹ ì •ë³´ê°€ ìƒˆ ë Œë”ë§ì„ ì´‰ë°œí•˜ì§€ ì•Šë„ë¡ í•˜ë ¤ëŠ” ê²½ìš°
    - ìš©ë„ ìœ„ì£¼ë¡œë§Œ ê¸°ì–µí•´ì„œ useRefê°€ ì–´ë–¤ ì¹œêµ¬ì¸ì§€ ë‘ë£¨ë­‰ì‹¤í•˜ê²Œë§Œ ì•Œê³  ìˆì—ˆëŠ”ë° ì´ë²ˆì— ì œëŒ€ë¡œ ì•Œê²Œ ë˜ë„¤ìš”..!
2.  > stateì™€ ë‹¬ë¦¬ refëŠ” ì½ê³  ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” current í”„ë¡œí¼í‹°ë¥¼ ê°€ì§„ ì¼ë°˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ì…ë‹ˆë‹¤. (ko.react.dev)
    - ì°¸ì¡°í˜• ë°ì´í„°ì¸ ì¼ë°˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ì´ê¸° ë•Œë¬¸ì— current ê°’ì´ ë¦¬ë Œë”ë§ê³¼ ìƒê´€ì—†ì´ ìœ ì§€ë˜ëŠ”ê±°êµ°ìš”. ë‹¹ì—°í•œ ì‚¬ì‹¤ì¸ë°, ì˜¤ëŠ˜ì—ì„œì•¼ í¼ëœ© ê¹¨ë‹¬ìŒì´ ì˜¤ë„¤ìš”.
3.  > stateì™€ refë¥¼ ë¹„êµí•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤: [(ë¹„êµí•´ë†“ì€ í‘œ)](https://react-ko.dev/learn/referencing-values-with-refs#differences-between-refs-and-state)

    - ë©´ì ‘ ë‹¨ê³¨ ì§ˆë¬¸ ì¤‘ í•˜ë‚˜?

4.  > You shouldnâ€™t read (or write) the current value during rendering.
    - Q. return (â€¦) ì•ˆì—ì„œ ì‚¬ìš©í•˜ì§€ ë§ë¼ëŠ” ëœ»ì¸ê±°ì£ ..?.?
    - A. ì €ë„ ì´ ë Œë”ë§ ì¤‘ì— ì½ê±°ë‚˜ ì“°ì§€ ë§ë¼ëŠ” ë¶€ë¶„ì´ í—·ê°ˆë¦¬ëŠ”ë° ë Œë”ë§ ì¤‘ì´ë¼ëŠ” ê±´ ì»´í¬ë„ŒíŠ¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí–ˆë‹¤ëŠ” ê±°ê³  ì•„ë§ˆ return ì „ í•¨ìˆ˜ ë³¸ë¬¸ì—ì„œ ë°”ë¡œ ì“°ì§€ ë§ë¼ê³  ì–˜ê¸°í•˜ëŠ” ê²ƒ ê°™ì•„ìš”.
    - A. ì €ë„ ë Œë”ë§ ì¤‘ì´ë¼ëŠ” í‘œí˜„ì´ ì˜ ì•ˆì™€ë‹¿ì•˜ëŠ”ë° ë‹¤ìŒ ë‚´ìš©ë“¤ ì½ì–´ë³´ë‹ˆ ì´ìˆ˜ë‹˜ ë§ì”€í•˜ì‹  ë‚´ìš©ëŒ€ë¡œ ì´í•´ê°€ ëìŠµë‹ˆë‹¤! (ë³„ë„ì˜ í›… ì—†ì´ ì‚¬ìš© ì§€ì–‘)
    - (ìŠ¤í„°ë”” í›„ ì¶”ê°€ ğŸ™‡) ì´ ì±•í„°ì˜ ë‹¤ë‹¤ìŒ ì±•í„°ì¸ Synchronizing with Effects ì±•í„°ì˜ [ì˜ˆì œ](https://react-ko.dev/learn/synchronizing-with-effects#step-1-declare-an-effect)ë¥¼ ë³´ë©´ ë Œë”ë§ ì¤‘ì— refì— ë°”ë¡œ ì ‘ê·¼í•´ì„œ ì—ëŸ¬ê°€ ë‚˜ëŠ” ê²½ìš°ê°€ ë‚˜ì™€ ìˆì–´ìš”. ì´ëŸ° ë¬¸ì œì— ëŒ€í•œ í•´ê²°ì±…ìœ¼ë¡œ `useEffectë¡œ ê°ì‹¸ ë Œë”ë§ ê³„ì‚° ë°–ìœ¼ë¡œ ì˜®ê¸°ëŠ” ê²ƒ` ì´ ì†Œê°œë©ë‹ˆë‹¤.
      >
5.  > React ë‚´ë¶€ì—ì„œ useRefê°€ ì´ë ‡ê²Œ êµ¬í˜„ë˜ëŠ” ê²ƒì„ ìƒìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - useRefê°€ useStateë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì ¸ ìˆë‹¤ë‹ˆ ë‘˜ì´ ì™„ì „ ë³„ê°œì¸ì¤„ ì•Œì•˜ì–´ìš”. stateë¥¼ set í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  mutableí•˜ê²Œ ë°”ê¾¸ê¸° ë•Œë¬¸ì— Reactê°€ ê°ì²´ ì†ì„±ì˜ ë³€ê²½ì„ ê°ì§€í•˜ì§€ ëª»í•´ì„œ ë Œë”ë§ì´ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ” ê±°êµ°ìš”!
6.  > refë¥¼ ì„¤ì •ìê°€ ì—†ëŠ” ì¼ë°˜ state ë³€ìˆ˜ë¼ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤.

    - const [ref, unused] = useState({ current: initialValue }); ì™€ í•¨ê»˜ ì´ë ‡ê²Œ ë³´ë‹ˆê¹Œ í›¨ì”¬ ì´í•´ê°€ ì‰½ë„¤ìš”..!

7.  > ë˜í•œ refë¡œ ì‘ì—…í•  ë•Œ mutation ë°©ì§€ì— ëŒ€í•´ ê±±ì •í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. (ko.react.dev)

    - ë§í¬ê°€ ì˜ëª» ê±¸ë ¤ìˆë„¤ìš”..! https://ko.react.dev/learn/updating-objects-in-state

8.  > ì´ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ refë¡œ DOM ì¡°ì‘í•˜ê¸°ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ko.react.dev)

    - ì—¬ê¸°ë„ ë§í¬ ì˜¤ë¥˜ê°€.. í•œê¸€ ë¬¸ì„œëŠ” ì˜¤ë¥˜(=PRì°¬ìŠ¤)ê°€ ë§êµ°ìš”. ğŸ˜Œ https://ko.react.dev/learn/manipulating-the-dom-with-refs

9.  > React ë‚´ë¶€ì—ì„œ useRefëŠ” ë‹¤ìŒê³¼ ê°™ì´ êµ¬í˜„ëœë‹¤ê³  ìƒìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

    - useRefê°€ useStateë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì ¸ ìˆë‹¤ë‹ˆ ë‘˜ì´ ì™„ì „ ë³„ê°œì¸ì¤„ ì•Œì•˜ì–´ìš”. stateë¥¼ set í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  mutableí•˜ê²Œ ë°”ê¾¸ê¸° ë•Œë¬¸ì— Reactê°€ ê°ì²´ ì†ì„±ì˜ ë³€ê²½ì„ ê°ì§€í•˜ì§€ ëª»í•´ì„œ ë Œë”ë§ì´ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ” ê±°êµ°ìš”!

10. > refë¥¼ ì„¤ì •ìê°€ ì—†ëŠ” ì¼ë°˜ state ë³€ìˆ˜ë¼ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤.
    - const [ref, unused] = useState({ current: initialValue }); ì™€ í•¨ê»˜ ì´ë ‡ê²Œ ë³´ë‹ˆê¹Œ í›¨ì”¬ ì´í•´ê°€ ì‰½ë„¤ìš”..!

## Manipulating the DOM with Refs

1.  > This is called a ref callback. React will call your ref callback with the DOM node when itâ€™s time to set the ref, and with null when itâ€™s time to clear it.
    - ref ì½œë°±ì— ëŒ€í•´ ì•Œê²Œ ëœ ì§€ ì–¼ë§ˆ ì•ˆ ëëŠ”ë° DOM ì—˜ë¦¬ë¨¼íŠ¸ê°€ ë§ˆìš´íŠ¸ë˜ê³  ë„ˆë¹„ë¥¼ ì¬ì•¼í•˜ëŠ” ê²½ìš° ìœ ìš©í•  ê²ƒ ê°™ë”ë¼êµ¬ìš”.
2.  > ë˜ ë‹¤ë¥¸ í•´ê²°ì±…ì€ ref ì–´íŠ¸ë¦¬ë·°íŠ¸ì— í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ê²ƒì„ â€œref ì½œë°±â€ì´ë¼ê³  í•©ë‹ˆë‹¤. ReactëŠ” refë¥¼ ì„¤ì •í•  ë•Œ DOM ë…¸ë“œì™€ í•¨ê»˜ ref ì½œë°±ì„ í˜¸ì¶œí•˜ë©°, refë¥¼ ì§€ìš¸ ë•Œì—ëŠ” nullì„ ì „ë‹¬í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ìì²´ ë°°ì—´ì´ë‚˜ Mapì„ ìœ ì§€í•˜ê³ , ì¸ë±ìŠ¤ë‚˜ íŠ¹ì • IDë¥¼ ì‚¬ìš©í•˜ì—¬ ì–´ë–¤ refì—ë“  ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - ì´ ë¶€ë¶„ì˜ ì‘ë™ ì›ë¦¬ê°€ ì˜ ì´í•´ê°€ ì•ˆë˜ë„¤ìš”. ì—¬ëŸ¬ë²ˆ ì½ì–´ë´ì•¼ í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.
3.  > const MyInput = forwardRef((props, ref) => {
    > return <input {...props} ref={ref} />;
    > });

        - ë§¤ë²ˆ propìœ¼ë¡œ refë¥¼ ë„˜ê²¨ì£¼ëŠ” ì‹ìœ¼ë¡œ ì²˜ë¦¬í–ˆì—ˆëŠ”ë° ì´ëŸ° ë°©ë²•ì´ ìˆì—ˆêµ°ìš”â€¦!

4.  > MyInput ì»´í¬ë„ŒíŠ¸ëŠ” forwardRefë¥¼ í†µí•´ ì„ ì–¸ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ props ë‹¤ìŒì— ì„ ì–¸ëœ ë‘ ë²ˆì§¸ ref ì¸ìˆ˜ë¥¼ í†µí•´ ìƒìœ„ì˜ inputRefë¥¼ ë°›ì„ ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.
    - ìš”ì¦˜ ëª¨ë…¸ë ˆí¬ì—ì„œ ì‚¬ìš©í•  ê³µí†µ UI ì»´í¬ë„ŒíŠ¸ ì‘ì—… ê´€ë ¨ ë‚´ìš©ì´ íŒŒíŠ¸ì—ì„œ ì˜¤ê°€ê³  ìˆì–´ ì¢…ì¢… ì½”ë“œë¥¼ ëœ¯ì–´ë³´ëŠ”ë°, ë””ìì¸ ì‹œìŠ¤í…œì²˜ëŸ¼ ê´‘ë²”ìœ„í•˜ê²Œ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í•  ë•Œì—ëŠ” forwardRefë¡œ ê°ì‹¸ì£¼ëŠ”ê²Œ í•„ìˆ˜ì¸ ê²ƒ ê°™ì•„ìš”.
5.  > On the other hand, high-level components like forms, lists, or page sections usually wonâ€™t expose their DOM nodes to avoid accidental dependencies on the DOM structure.
    - ê·¸ëŸ°ë° MUIì—ì„œëŠ” ë³´í†µ root ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ refì— ë‹´ì•„ì¤€ë‹¤ê³  ë˜ì–´ ìˆì—ˆì–´ìš”. ë¶€ë“ì´í•˜ê²Œ ì ‘ê·¼ì´ í•„ìš”í•œ ì‚¬ëŒë“¤ì„ ìœ„í•´ì„œê² ì£ ?
6.  > ë°˜ë©´ í¼, ëª©ë¡ í˜¹ì€ í˜ì´ì§€ ì„¹ì…˜ ë“±ì˜ ê³ ìˆ˜ì¤€ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ì˜ë„í•˜ì§€ ì•Šì€ DOM êµ¬ì¡° ì˜ì¡´ì„± ë¬¸ì œë¥¼ í”¼í•˜ê³ ì ì¼ë°˜ì ìœ¼ë¡œ DOM ë…¸ë“œë¥¼ ë…¸ì¶œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    - low-level componentì™€ high-level componentì˜ ë¹„êµê°€ ì¸ìƒê¹Šë„¤ìš©
7.  > In uncommon cases, you may want to restrict the exposed functionality. You can do that with useImperativeHandle
    - ì´ í›…ì´ ì´ëŸ° ë° ì‚¬ìš©í•˜ëŠ” ê±°ì˜€êµ°ìš”. focusë•Œë¬¸ì— ref ì“°ëŠ” ê³³ì´ ë§ì€ë° ì™¸ë¶€ì—ì„œ ì“°ëŠ” ê±´ ì•„ë‹ˆë‹ˆê¹Œ ì´ëŸ° ì œí•œì„ ê±¸ì–´ë‘” ì ì€ ì—†ê±°ë“ ìš”. ì œí•œì„ ê¼­ ê±¸ì–´ì•¼ í•˜ëŠ” ê²½ìš°ë¥¼ ìœ„í•´ì„œ ê¸°ì–µí•´ë‘¬ì•¼ ê² ì–´ìš”.
    - ì˜¤ ì €ëŠ” ì´ í›…ì„ ì²˜ìŒ ë“¤ì–´ë´¤ëŠ”ë°â€¦ ë‹¹ì¥ì€ í•„ìš”í•œ ê²½ìš°ê°€ ìˆì„ê¹Œ ì‹¶ìœ¼ë©´ì„œë„ ë³µì¡í•œ í˜‘ì—… ì‹œì— ìœ ìš©í•  ê²ƒ ê°™ë„¤ìš”â€¦!
8.  > ë“œë¬¸ ê²½ìš°ì§€ë§Œ ë…¸ì¶œë˜ëŠ” ê¸°ëŠ¥ì„ ì œí•œí•˜ê³  ì‹¶ì„ ìˆ˜ë„ ìˆì„ ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ´ ë• useImperativeHandleì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤:
    - ì™€ ì´ê±´ ì •ë§ ì²˜ìŒë´ìš”. ë„ˆë¬´ ì‹ ê¸°í•˜ê³  ìœ ìš©í•´ë³´ì´ë„¤ìš”! refì— ì°¸ì¡°í•œ DOMì´ í¬í•¨í•˜ê³  ìˆëŠ” ë©”ì†Œë“œ ì¤‘ í•„ìš”í•œ ê²ƒë§Œ ë‚¨ê¸¸ ìˆ˜ ìˆêµ°ìš©
9.  > Usually, you will access refs from event handlers.
    - ì´ ë¶€ë¶„ì´ ì œê°€ ì•ì„œ ì˜¬ë¦° ì§ˆë¬¸ì— ëŒ€í•œ ë‹µì´ì§€ ì•Šìœ¼ë ¤ë‚˜â€¦ì•„ë‹Œê°€â€¦ (ì´ ì§ˆë¬¸ì´ì—ˆìŠµë‹ˆë‹¤ -> return (â€¦) ì•ˆì—ì„œ ì‚¬ìš©í•˜ì§€ ë§ë¼ëŠ” ëœ»ì¸ê±°ì£ ..?.?)
    - (ìŠ¤í„°ë”” í›„ ì¶”ê°€ ğŸ™‡) ì•„ë‹ˆì—ˆë˜ê±¸ë¡œ..
10. > So the time you scroll the list to its last element, the todo has not yet been added. This is why scrolling always â€œlags behindâ€ by one item.
    - ë¹„ìŠ·í•œ ë¬¸ì œë¥¼ ê²ªì—ˆì„ ë•Œ ìƒíƒœë¥¼ í•˜ë‚˜ ì¶”ê°€í•´ì„œ useEffectë¡œ í•´ê²°í–ˆë˜ ê¸°ì–µì´ ë‚˜ëŠ”ë° ëŒ€ì‹  flushSyncë¥¼ ì‚¬ìš©í•˜ë©´ ë˜ëŠ”êµ°ìš”. ê·¼ë° ë™ê¸°ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë¥¼ ê°•ì œí•œë‹¤ê³  í•˜ë‹ˆê¹Œ ì¡°ì‹¬í•´ì„œ ì¨ì•¼ í•˜ëŠ” í•¨ìˆ˜ì¼ ê²ƒ ê°™ì•„ìš”.
    - ì˜¤ì˜¤ ì €ë„ ìµœê·¼ì— ë¹„ìŠ·í•œ ê±¸ ê²ªì–´ì„œ êµ‰ì¥íˆ ì´ìƒí•œ(?) ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í–ˆë˜ ê²½í—˜ì´ ìˆëŠ”ë°â€¦ flushSync ì‚¬ìš©í•˜ë©´ í™•ì‹¤íˆ ì½”ë“œê°€ í›¨ì”¬ ê¹”ë”í•´ì§ˆ ê²ƒ ê°™ì•„ìš”
11. > the last todo will already be in the DOM by the time you try to scroll to it:
    - vueì—ë„ ë¹„ìŠ·í•œê²Œ ìˆì–´ìš” flushSyncì™€ ì¼ëŒ€ì¼ ëŒ€ì‘ëœë‹¤ê³ ëŠ” í•  ìˆ˜ ì—†ê² ì§€ë§Œâ€¦ ë‹¤ìŒ dom ì—…ë°ì´íŠ¸ê°€ ì™„ë£Œë˜ë©´ `nextTick` ë‚´ ì½œë°±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤(ë˜ëŠ” awaitë¥¼ ë¶™ì—¬ì„œ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê±°ë‚˜ìš”!) í”„ë ˆì„ì›Œí¬ë¥¼ ë– ë‚˜ì„œ state ì—…ë°ì´íŠ¸ê°€ ëœ í›„ì— ë­”ê°ˆ í•˜ê³ ì‹¶ì€ ìš•êµ¬(?)ëŠ” ë™ì¼í•œê°€ ë´…ë‹ˆë‹¤ã…ã…
    ```javascript
    function nextTick(callback?: () => void): Promise<void>
    ```
12. > í•˜ì§€ë§Œ DOMì„ ì§ì ‘ ìˆ˜ì •í•˜ëŠ” ì‹œë„ë¥¼ í•œë‹¤ë©´ Reactê°€ ë§Œë“¤ì–´ ë‚´ëŠ” ë³€ê²½ ì‚¬í•­ê³¼ ì¶©ëŒì„ ë°œìƒì‹œí‚¬ ìœ„í—˜ì„ ê°ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤.
    - refë¥¼ ì´ìš©í•˜ì—¬ DOM ì¡°ì‘í•˜ëŠ” ê²ƒì„ escape hatches ìš©ë„ë¡œë§Œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì´ìœ 
13. > ê·¸ë ‡ë‹¤ê³  ì „í˜€ í•  ìˆ˜ ì—†ë‹¤ëŠ” ê±´ ì•„ë‹ˆê³ , ì£¼ì˜ê°€ í•„ìš”í•˜ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.
    - ì´ë²ˆ ë‚´ìš©ë“¤ êµ‰ì¥íˆ í•˜ì§€ ëª»í•˜ëŠ”ê±´ ì•„ë‹Œë° ì£¼ì˜í•´ë¼~ í•˜ëŠ” ë‚´ìš©ì´ ë§êµ°ìš” ã…ã…ã… ë¬´ì„­â€¦.

## Synchronizing with Effects

1. > Effectë¥¼ ì‚¬ìš©í•˜ë©´ íŠ¹ì • ì´ë²¤íŠ¸ê°€ ì•„ë‹Œ ë Œë”ë§ ìì²´ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ ëª…ì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

   - ì´í™íŠ¸ê°€ í•˜ëŠ” ì—­í•  í•œ ì¤„ ì„¤ëª…
   - ì´ˆë°˜ë¶€ì— useEffectë¥¼ ì“°ì§€ ì•Šì•„ë„ ë˜ëŠ” ë¶€ë¶„~ ê³¼ ê°™ì€ ë‚´ìš©ì—ì„œ í™• ì™€ë‹¿ì§€ ì•Šì•˜ëŠ”ë° ì—¬ê¸° ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ ëª…ì‹œí•œë‹¤ëŠ” ë¶€ë¶„ì´ ì´ë¦„ì´ë‘ë„ ì—°ê´€ì§€ì–´ì ¸ì„œ ì™€ë‹¿ë„¤ìš”..! ê·¸ë¦¬ê³  ì—¬íƒœê¹Œì§€ ë‚¨ìš©í•œ ë¶€ë¶„ë“¤ì— ëŒ€í•´ì„œ í™•ì‹¤íˆ ë°˜ì„±ì„ í•˜ê²Œ ë©ë‹ˆë‹¤..

2. > If your Effect only adjusts some state based on other state, you might not need an Effect.
   - ë¬´ì§€ì„± Effect ì‚¬ìš©ì„ ë°˜ì„±í•©ë‹ˆë‹¤.. ğŸ«¡
3. > In other words, useEffect â€œdelaysâ€ a piece of code from running until that render is reflected on the screen.
   - propsë‚˜ stateê°€ ë°”ë€” ë•Œ useEffectë¥¼ ë¶€ë¥´ëŠ” ê²Œ ì•„ë‹ˆë¼ ì˜¤íˆë ¤ ì‹¤í–‰ì„ ì§€ì—°í•œë‹¤ëŠ” ê´€ì •ì—ì„œ ë°”ë¼ë´ì•¼ í•˜ëŠ”êµ°ìš”!
4. > ì´ ì½”ë“œê°€ ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì´ìœ ëŠ” ë Œë”ë§ ì¤‘ì— DOM ë…¸ë“œë¡œ ë¬´ì–¸ê°€ë¥¼ ì‹œë„í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. Reactì—ì„œ ë Œë”ë§ì€ JSXì˜ ìˆœìˆ˜í•œ ê³„ì‚°ì´ì–´ì•¼ í•˜ë©° DOM ìˆ˜ì •ê³¼ ê°™ì€ ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ í¬í•¨í•´ì„œëŠ” ì•ˆë©ë‹ˆë‹¤.
   - ì˜¤ ì—¬ê¸° ë³´ë‹ˆê¹Œ ë Œë”ë§ ì¤‘ì— ë­ë­ í•˜ì§€ ë§ë¼ëŠ” ê²Œ Effectì²˜ëŸ¼ ì´ìŠ¤ì¼€ì´í”„í•˜ì§€ ì•Šê³  í•¨ìˆ˜ ë³¸ë¬¸ì—ì„œ ê³„ì‚° ì™¸ ë‹¤ë¥¸ ì‘ì—…ì„ í•˜ì§€ ë§ë¼ê³  í•˜ëŠ” ëœ» ë§ëŠ” ê²ƒ ê°™ì•„ìš”.
5. > ë”êµ¬ë‚˜ VideoPlayerê°€ ì²˜ìŒ í˜¸ì¶œë  ë•Œ DOMì€ ì•„ì§ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤!

   ```javascript
   function VideoPlayer({ src, isPlaying }) {
     const ref = useRef(null);

     if (isPlaying) {
       ref.current.play(); // Calling these while rendering isn't allowed.
     } else {
       ref.current.pause(); // Also, this crashes.
     }

     return <video ref={ref} src={src} loop playsInline />;
   }
   ```

   - ìœ„ ì˜ˆì œ ì½”ë“œì—ì„œ VideoPlayer ì»´í¬ë„ŒíŠ¸ì˜ if ë¶€ë¶„ì„ if(ref.current) {...} ë¡œ ê°ì‹¸ë‹ˆê¹Œ ë˜ê¸°ëŠ”í•˜ë„¤ìš”,,,
   - ìœ„ ì˜ˆì œ ì½”ë“œì˜ `// Calling these while rendering isn't allowed.` ì£¼ì„ì„ ë³´ë‹ˆê¹Œ ë Œë”ë§ ì¤‘ì— ref ì ‘ê·¼í•˜ì§€ ë§ë¼ëŠ” ë§ì´ ì´í•´ë˜ëŠ”ê²ƒ ê°™ì•„ìš”!
   - ì´ ê²½ìš°ì— ì‚¬ìš©í•˜ê¸° ì¢‹ì€ê²Œ ref callback ì¸ê²ƒê°™ê¸°ë„! (ì‹œê°„ ë˜ì‹œë©´ ì½”ë“œ ê³µìœ í•´ì£¼ì‹œê¸°..!ğŸ’•)
   - (ìŠ¤í„°ë”” í›„ ì¶”ê°€ğŸ™‡) í•œë²ˆ í•´ë´¤ëŠ”ë° ì•„ë˜ì²˜ëŸ¼ í•˜ë©´ ë˜ë ¤ë‚˜ìš”..!

     ```javascript
     function VideoPlayer({ src, isPlaying }) {
       // const ref = useRef(null);

       const handleRefCb = (node) => {
         // ifë¬¸ ë‘ ë²ˆ ë“¤ì–´ê°€ëŠ”ê±´ ëª¨ë¥¸ ì²™ í•´ì£¼ì‹œê¸°
         if (node) {
           if (isPlaying) {
             node.play();
           } else {
             node.pause();
           }
         }
       };

       return <video ref={handleRefCb} src={src} loop playsInline />;
     }
     ```

6. > í•´ê²°ì±…ì€ ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ useEffectë¡œ ê°ì‹¸ ë Œë”ë§ ê³„ì‚° ë°–ìœ¼ë¡œ ì˜®ê¸°ëŠ” ê²ƒì…ë‹ˆë‹¤.
   - ì´ê²ƒë„ ë¹„ìŠ·í•œ ì˜ë¯¸
7. > ë™ì˜ìƒ í”Œë ˆì´ì–´ ì œì–´ëŠ” ì‹¤ì œë¡œëŠ” í›¨ì”¬ ë” ë³µì¡í•˜ë‹¤ëŠ” ì ì— ìœ ì˜í•˜ì„¸ìš”. play() í˜¸ì¶œì´ ì‹¤íŒ¨í•  ìˆ˜ë„ ìˆê³ ,
   - ìµœê·¼ì— ì™¸ì£¼ì‚¬ í”„ë¡œì íŠ¸ì— sentry(ì—ëŸ¬ì¶”ì ë¼ì´ë¸ŒëŸ¬ë¦¬)ë¥¼ ë‹¬ì•„ë´¤ë”ë‹ˆ ë™ì˜ìƒ play() í˜¸ì¶œ ì‹¤íŒ¨ë¡œ í•˜ë£¨ì— ì—ëŸ¬ë¥¼ ì²œê°œë‹¨ìœ„ë¡œ ë±‰ê³  ìˆë”ë¼êµ¬ìš” ã… ã…  ë³„ê±° ì•„ë‹ˆì§€ë§Œ ë„˜ ê³µê°ê°€ëŠ” ì¤„ì´ë„¤ìš”..
8. > You will get a lint error if the dependencies you specified donâ€™t match what React expects based on the code inside your Effect.
   - Q. ë‹¤ë“¤ exhaustive-deps eslint rule ì¼œë†“ê³  ì‚¬ìš©í•˜ì‹œë‚˜ìš”..? ì €ëŠ” warningìœ¼ë¡œ ì¼œë†“ê³  ì“°ê¸´ í•˜ëŠ”ë°, ê°€ë” ê·€ì°®ì„ ë•Œê°€ ìˆì–´ì„œ ì–´ë–»ê²Œ í•˜ë©´ ì¢‹ì„ì§€ ê³ ë¯¼ì…ë‹ˆë‹¤. ğŸ¤” (ì˜ë„ì ìœ¼ë¡œ íŠ¹ì • ìƒíƒœë§Œì„ êµ¬ë…í•´ì„œ useEffectë¥¼ ì‚¬ìš©í•  ë•Œë¼ë˜ê°€..)
9. > ì˜ì¡´ì„± ë°°ì—´ì´ ì—†ëŠ” ê²½ìš°ì™€ ë¹„ì–´ ìˆëŠ” [] ì˜ì¡´ì„± ë°°ì—´ì´ ìˆëŠ” ê²½ìš°ì˜ ë™ì‘ì€ ë‹¤ë¦…ë‹ˆë‹¤:
   - ì˜ì¡´ì„± ë°°ì—´ì„ ì•ˆ ë„£ê³  useEffectë¥¼ ì‚¬ìš©í•´ë³¸ ê²½í—˜ì´ ì—†ì–´ì„œ ë‘ë²ˆì§¸ ì¸ìê°€ optionalì¸ì¤„ë„ ëª°ëë„¤ìš”â€¦!
   - ì˜ì¡´ì„± ë°°ì—´ ì—†ì´ useEffect ì‚¬ìš©í•  ì¼ì´ ë“œë¬¼ì–´ì„œ ê·¸ëŸ° ê²ƒ ê°™ì•„ìš”
10. > ì˜ˆë¥¼ ë“¤ì–´, ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ refê°€ ì „ë‹¬ëœ ê²½ìš° ì˜ì¡´ì„± ë°°ì—´ì— ì´ë¥¼ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ í•­ìƒ ë™ì¼í•œ refë¥¼ ì „ë‹¬í•˜ëŠ”ì§€, ì•„ë‹ˆë©´ ì—¬ëŸ¬ ref ì¤‘ í•˜ë‚˜ë¥¼ ì¡°ê±´ë¶€ë¡œ ì „ë‹¬í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì´ ë°©ë²•ì´ ì¢‹ìŠµë‹ˆë‹¤.
    - ì´ëŸ° ê²½ìš°ê¹Œì§€ ë¦°í„°ì—ì„œ ì¡ì•„ì¤€ë‹¤ëŠ” ê±°ê² ì£ ? ì‚¬ì‹¤ ë¦°í„° ì“°ë©´ì„œë„ ì¢€ ë¬´ì§€ì„±ìœ¼ë¡œ ë„£ìœ¼ë¼ëŠ” ê±° ë‹¤ ë„£ê³  ë¬¸ì œ ì—†ìœ¼ë©´ ë„˜ì–´ê°€ê¸´ í•˜ëŠ”ë° ã…ã…
    - ë¦°í„°ê°€ ì¡ì•„ì¤„ê¹Œìš§? (ì‹¤í—˜ í•´ë´…ì‹œë‹¤)
11. > Bugs like this are easy to miss without extensive manual testing. To help you spot them quickly, in development React remounts every component once immediately after its initial mount.
    - ì´ì „ì— immutable í™•ì¸ì„ ìœ„í•´ì„œë„ ë‘ ë²ˆ ë§ˆìš´íŠ¸ ì‹œí‚¨ë‹¤ê³  í–ˆëŠ”ë° cleanup í•¨ìˆ˜ê°€ í•„ìš”í•œì§€ í™•ì¸ì„ ìœ„í•´ì„œë„ ìœ ìš©í•˜êµ°ìš”.
12. > So there would be only one active subscription at a time. This has the same user-visible behavior as calling addEventListener() once, as in production.
    - ë‘ ë²ˆ ë§ˆìš´íŠ¸ì‹œí‚¤ëŠ” ë™ì‘ì´ cleanupì´ ì œëŒ€ë¡œ ì´ë£¨ì–´ì§€ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•œ ìš©ë„ë¡œë„ ì‚¬ìš©ë˜ëŠ”êµ°ìš”. ì—¬ëŸ¬ëª¨ë¡œ react ê°œë°œì‹œì—ëŠ” strict modeê°€ í•„ìˆ˜ì ì´ë„¤ìš©
13. > ê°œë°œ ì¤‘ì¸ ë‘ ë²ˆì§¸ ìš”ì²­ì´ ê·€ì°®ì€ ê²½ìš° ê°€ì¥ ì¢‹ì€ ë°©ë²•ì€ ìš”ì²­ì„ ì¤‘ë³µ ì œê±°í•˜ê³  ì»´í¬ë„ŒíŠ¸ ê°„ì— ì‘ë‹µì„ ìºì‹œí•˜ëŠ” ì†”ë£¨ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤:
    - ê°œë°œ í™˜ê²½ì—ì„œ ë°ì´í„° í˜¸ì¶œ ë‘ ë²ˆ í•˜ë”ë¼ë„ ê·¸ëƒ¥ ë‘ëŠ”ë° ì—­ì‹œ ê·¸ëŸ¬ë©´ ì•ˆ ë˜ê² ì£ ? ã…ã… ì„œë¹„ìŠ¤ í•˜ë‚˜ì— React Query ë„ì…í•˜ë‹ˆê¹Œ ì½”ë“œëŸ‰ë„ ì¤„ê³  í¸í•˜ë”ë¼êµ¬ìš”.
    - Q. í˜¹ì‹œ React Query ì“°ì‹œëŠ” ë¶„? ì–´ëŠ ì •ë„ ê¹Šì´ ìˆê²Œ ì¨ë³´ì…¨ë‚˜ìš”?
14. > Effect ë‚´ì— fetch í˜¸ì¶œì„ ì‘ì„±í•˜ëŠ” ê²ƒì€ íŠ¹íˆ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œë§Œ ì‘ì„±ëœ ì•±ì—ì„œ ë°ì´í„°ë¥¼ í˜ì¹˜í•˜ëŠ” ì¸ê¸° ìˆëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ê²ƒì€ ë§¤ìš° ìˆ˜ë™ì ì¸ ì ‘ê·¼ ë°©ì‹ì´ë©° ìƒë‹¹í•œ ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤.
    - React Query ì“°ëŠ” ê³³ ì œì™¸í•˜ê³  ì €í¬ ì½”ë“œëŠ” ê±°ì˜ ë‹¤ ì´ë ‡ê²Œ êµ¬í˜„ë˜ì–´ ìˆì–´ìš”. ì²˜ìŒ ë°°ìš°ëŠ” ë°©ë²•ì´ê¸°ë„ í•˜ê³ 
15. > If you use a framework, use its built-in data fetching mechanism. Modern React frameworks have integrated data fetching mechanisms that are efficient and donâ€™t suffer from the above pitfalls.
    - í˜¹ì‹œ Next.jsì—ì„œ ë¹ŒíŠ¸ì¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ë°ì´í„° í˜ì¹­ ë°©ë²•ì´ ìˆë‚˜ìš”?
    - [ì°¾ì•„ë³´ë‹ˆê¹Œ ìˆìŠµë‹ˆë‹¤!](https://nextjs.org/docs/app/building-your-application/data-fetching)
16. > Otherwise, consider using or building a client-side cache. Popular open source solutions include React Query, useSWR, and React Router 6.4+.
    - Next.jsì˜ SSRê³¼ ê°™ì€ ë°©ë²•ì€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì— í•œê³„ê°€ ìˆë‹¤ ë³´ë‹ˆ, ìš”ì¦˜ì—ëŠ” í´ë¼ì´ì–¸íŠ¸ ìºì‹œ êµ¬ì¶•ì´ ë³´í¸ì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©ë˜ëŠ” ê²ƒ ê°™ì•„ìš”. React Query, SWR, Apollo/client ë“±ë“±..
17. This helps you find Effects that need cleanup and exposes bugs like race conditions early.
    - ìµœê·¼ì— ì´ ë‘ ë²ˆì˜ effect í˜¸ì¶œë¡œ ì¸í•˜ì—¬ ë°ì´í„° ì²˜ë¦¬ ë¡œì§ì— ë¬¸ì œê°€ ìƒê¸´ ê²½ìš°ê°€ ìˆì—ˆëŠ”ë°, ê°œë°œ í™˜ê²½ì—ì„œë„ useEffectë¥¼ í•œë²ˆë§Œ ì‹¤í–‰í•˜ëŠ” hookì„ ë§Œë“¤ì–´ ì²˜ë¦¬í–ˆê±°ë“ ìš”. ê·¸ë¦¬ ì¢‹ì€ ë°©ë²•ì´ ì•„ë‹ˆì—ˆë˜ ê²ƒ ê°™ì•„ ë°˜ì„±í•˜ê²Œ ë˜ë„¤ìš”.
